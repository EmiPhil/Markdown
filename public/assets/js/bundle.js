function render(target,source){target||(target=renderee),source||(source=codeMirror.getValue());for(var parsed=reader.parse(source),result=writer.render(parsed);target.firstChild;)target.removeChild(target.firstChild);target.innerHTML=result}function openNav(){classie.toggle(nav,"open"),TweenLite.to(nav,.5,{left:0})}function closeNav(){nav.classList.contains("open")&&(classie.toggle(nav,"open"),TweenLite.to(nav,.5,{left:"-240px"}))}function accordion(target,self){for(var i=0;i<navHeaders.length;i+=1)classie.remove(navHeaders[i],"current");classie.add(self,"current"),target=document.getElementById(target),target.classList.contains("open")?(classie.toggle(target,"open"),TweenLite.to(target,.5,{"max-height":0})):(classie.toggle(target,"open"),TweenLite.to(target,.5,{"max-height":"250px"}))}function currentNav(self){for(var i=0;i<navLinks.length;i+=1)classie.remove(navLinks[i],"active");classie.add(self,"active"),closeNav()}function tutNav(self){var name=self.textContent;_.has(tutorials),name&&tutorials[name].smartLoad()}function tutProg(self){var name=self.textContent;currentTutorial.steps.forEach(function(step){step.name===name&&currentTutorial.load(step)})}var codeEditor=document.getElementById("codeEditor"),codeMirror=CodeMirror(codeEditor,{value:"# Hello there. \n How do you do? \n\n This is a tutorial for the popular [Markdown](http://chrisalley.github.io/commonmark-website/) library. \n It is a submission by **Phil** of **EmiPhil** for [Jeff Atwood.](http://blog.codinghorror.com/toward-a-better-markdown-tutorial/)\n Check it out at [github!](https://github.com/EmiPhil/Markdown)\n\n Markdown is a *great* language for quickly creating HTML content.\n\n Go ahead and access one of the tutorial's from the left, or try typing directly in this _**live editor!!**_",theme:"mdn-like",lineNumbers:!0}),timeoutId;codeMirror.on("change",function(){window.clearTimeout(timeoutId),timeoutId=window.setTimeout(render,1e3)});var reader=new commonmark.Parser,writer=new commonmark.HtmlRenderer,renderee=document.getElementById("target");render();var Modal=function(header,text){this.header=header,this.text=text};Modal.prototype.render=function(){};var nav=document.getElementsByTagName("nav")[0],navHeaders=document.querySelectorAll(".navHeader"),navLinks=document.querySelectorAll(".navLinks"),Step=function(name,lesson,md,answer,success,failure){this.name=name,this.lesson=lesson,this.answer=answer,this.md=md,this.success=success,this.failure=failure,this.completed=!1,this.awesome=!0},tutorials={},currentTutorial,Tutorial=function(firstStep,name){this.steps=[firstStep],this.current=this.steps[0],tutorials[name]=this};Tutorial.prototype.check=function(){var step=this.current,success=step.success,failure=step.failure,context=codeMirror,result=step.answer(context,step);result&&success(context,step),failure(context,step)},Tutorial.prototype.step=function(name,lesson,answer){var step=new Step(name,lesson,answer);return this.steps.push(step),step};var instructions=document.getElementById("lesson");Tutorial.prototype.load=function(step){this.current=step,currentTutorial=this,this.generateProgBar(),this.editorLoad(step.md),render(instructions,step.lesson)};var progBar=document.getElementById("progBar");Tutorial.prototype.generateProgBar=function(){for(;progBar.firstChild;)progBar.removeChild(progBar.firstChild);var lessonProg=document.createElement("li"),lessonProgSpan=document.createElement("span"),bolded=document.createElement("b"),text=document.createTextNode("Lesson Progress");lessonProg.className="lessonProgress",bolded.appendChild(text),lessonProgSpan.appendChild(bolded),lessonProg.appendChild(lessonProgSpan),progBar.appendChild(lessonProg);var self=this;self.steps.forEach(function(step){var li=document.createElement("li"),span=document.createElement("span"),text=document.createTextNode(step.name);self.current.name===step.name&&classie.add(li,"active"),span.appendChild(text),step.completed&&(complete=document.createElement("span"),classie.add(complete,"icon-check"),classie.add(li,"completed"),span.appendChild(complete)),self.current.name===step.name&&step.completed&&(classie.remove(li,"active"),classie.remove(li,"completed"),classie.add(li,"activeCompleted")),li.appendChild(span),progBar.appendChild(li)})},Tutorial.prototype.smartLoad=function(){var self=this;self.steps.forEach(function(step){step.completed||self.load(step)}),self.load(_.last(self.steps))},Tutorial.prototype.editorLoad=function(md){codeMirror.setValue(md),render()},Tutorial.prototype.reset=function(){this.current.completed&&(this.current.completed=!1),this.load(this.current)};var begStepOneLesson="# Welcome to the beginner's tutorial!\n In this section, we will cover the basic components that make \n Markdown awesome.\n\n This top section will be the *lesson.*",begStepOneMD="## Interactive result area.\n In this area, you will be able to edit markdown in the left to try and complete the lessons.\n\n Are you ready? Let's get started!\n\n Try typing your name in on line **8.**",begStepOne=new Step("Intro",begStepOneLesson,begStepOneMD,function(doc){var input=doc.getLine(7);return alert(input),input&&!_.isEmpty(input)?!0:!1},function(doc,self){var name=doc.getLine(7),namePlace=document.getElementById("namePlace");namePlace.textContent="Welcome, "+name,self.completed=!0,currentTutorial.generateProgBar()},function(){}),beginnersTutorial=new Tutorial(begStepOne,"Beginner");